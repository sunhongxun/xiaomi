{"ast":null,"code":"'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _extends2 = require('babel-runtime/helpers/extends');\n\nvar _extends3 = _interopRequireDefault(_extends2);\n\nvar _classCallCheck2 = require('babel-runtime/helpers/classCallCheck');\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = require('babel-runtime/helpers/createClass');\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _possibleConstructorReturn2 = require('babel-runtime/helpers/possibleConstructorReturn');\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _inherits2 = require('babel-runtime/helpers/inherits');\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nvar _react = require('react');\n\nvar React = _interopRequireWildcard(_react);\n\nvar _rmcSteps = require('rmc-steps');\n\nvar _rmcSteps2 = _interopRequireDefault(_rmcSteps);\n\nvar _icon = require('../icon');\n\nvar _icon2 = _interopRequireDefault(_icon);\n\nfunction _interopRequireWildcard(obj) {\n  if (obj && obj.__esModule) {\n    return obj;\n  } else {\n    var newObj = {};\n\n    if (obj != null) {\n      for (var key in obj) {\n        if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key];\n      }\n    }\n\n    newObj['default'] = obj;\n    return newObj;\n  }\n}\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    'default': obj\n  };\n}\n\nvar Steps = function (_React$Component) {\n  (0, _inherits3['default'])(Steps, _React$Component);\n\n  function Steps() {\n    (0, _classCallCheck3['default'])(this, Steps);\n    return (0, _possibleConstructorReturn3['default'])(this, (Steps.__proto__ || Object.getPrototypeOf(Steps)).apply(this, arguments));\n  }\n\n  (0, _createClass3['default'])(Steps, [{\n    key: 'componentDidMount',\n    value: function componentDidMount() {\n      this.componentDidUpdate();\n    }\n  }, {\n    key: 'componentDidUpdate',\n    value: function componentDidUpdate() {\n      if (this.props.direction !== 'horizontal') {\n        return;\n      } // set tail's left position based on main's width for each step dynamically.\n\n\n      this.stepRefs.forEach(function (s) {\n        if (s.refs.tail) {\n          s.refs.tail.style.left = s.refs.main.offsetWidth / 2 + 'px';\n        }\n      });\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      var _this2 = this;\n\n      this.stepRefs = [];\n      var _props = this.props,\n          children = _props.children,\n          status = _props.status,\n          size = _props.size;\n      var current = this.props.current; // flattern the array at first https://github.com/ant-design/ant-design-mobile/issues/934\n\n      var filterChildren = [];\n\n      if (children && children.length) {\n        children.forEach(function (item) {\n          if (React.isValidElement(item)) {\n            filterChildren.push(item);\n          }\n        });\n      }\n\n      var newChildren = React.Children.map(filterChildren, function (item, index) {\n        var className = item.props.className;\n\n        if (index < filterChildren.length - 1 && filterChildren[index + 1].props.status === 'error') {\n          className = className ? className + ' error-tail' : 'error-tail';\n        }\n\n        var icon = item.props.icon;\n\n        if (!icon) {\n          if (index < current) {\n            // 对应 state: finish\n            icon = 'check-circle-o';\n          } else if (index > current) {\n            // 对应 state: wait\n            icon = 'ellipsis';\n            className = className ? className + ' ellipsis-item' : 'ellipsis-item';\n          }\n\n          if (status === 'error' && index === current || item.props.status === 'error') {\n            icon = 'cross-circle-o';\n          }\n        }\n\n        icon = typeof icon === 'string' ? React.createElement(_icon2['default'], {\n          type: icon,\n          size: size === 'small' ? status === 'wait' ? 'xxs' : 'xs' : 'md'\n        }) : icon;\n        return React.cloneElement(item, {\n          icon: icon,\n          className: className,\n          ref: function ref(c) {\n            return _this2.stepRefs[index] = c;\n          }\n        });\n      });\n      return React.createElement(_rmcSteps2['default'], (0, _extends3['default'])({\n        ref: function ref(el) {\n          return _this2.stepsRef = el;\n        }\n      }, this.props), newChildren);\n    }\n  }]);\n  return Steps;\n}(React.Component);\n\nexports['default'] = Steps;\nSteps.Step = _rmcSteps2['default'].Step;\nSteps.defaultProps = {\n  prefixCls: 'am-steps',\n  iconPrefix: 'ant',\n  labelPlacement: 'vertical',\n  direction: 'vertical',\n  current: 0\n};\nmodule.exports = exports['default'];","map":null,"metadata":{},"sourceType":"script"}